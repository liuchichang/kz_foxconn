(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a87e90c"],{"4bd4":function(e,t,a){"use strict";var s=a("5530"),r=(a("caad"),a("2532"),a("07ac"),a("4de4"),a("159b"),a("7db0"),a("58df")),n=a("7e2b"),i=a("3206");t["a"]=Object(r["a"])(n["a"],Object(i["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(e){var t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(e){var t=this,a=function(e){return e.$watch("hasError",(function(a){t.$set(t.errorBag,e._uid,a)}),{immediate:!0})},s={_uid:e._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?s.shouldValidate=e.$watch("shouldValidate",(function(r){r&&(t.errorBag.hasOwnProperty(e._uid)||(s.valid=a(e)))})):s.valid=a(e),s},validate:function(){return 0===this.inputs.filter((function(e){return!e.validate(!0)})).length},reset:function(){this.inputs.forEach((function(e){return e.reset()})),this.resetErrorBag()},resetErrorBag:function(){var e=this;this.lazyValidation&&setTimeout((function(){e.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(e){return e.resetValidation()})),this.resetErrorBag()},register:function(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister:function(e){var t=this.inputs.find((function(t){return t._uid===e._uid}));if(t){var a=this.watchers.find((function(e){return e._uid===t._uid}));a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter((function(e){return e._uid!==t._uid})),this.inputs=this.inputs.filter((function(e){return e._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(e){var t=this;return e("form",{staticClass:"v-form",attrs:Object(s["a"])({novalidate:!0},this.attrs$),on:{submit:function(e){return t.$emit("submit",e)}}},this.$slots.default)}})},"62ad":function(e,t,a){"use strict";var s=a("ade3"),r=a("5530"),n=(a("a9e3"),a("b64b"),a("ac1f"),a("5319"),a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("caad"),a("159b"),a("2ca0"),a("4b85"),a("2b0e")),i=a("d9f7"),o=a("80d2"),l=["sm","md","lg","xl"],c=function(){return l.reduce((function(e,t){return e[t]={type:[Boolean,String,Number],default:!1},e}),{})}(),d=function(){return l.reduce((function(e,t){return e["offset"+Object(o["F"])(t)]={type:[String,Number],default:null},e}),{})}(),u=function(){return l.reduce((function(e,t){return e["order"+Object(o["F"])(t)]={type:[String,Number],default:null},e}),{})}(),f={col:Object.keys(c),offset:Object.keys(d),order:Object.keys(u)};function v(e,t,a){var s=e;if(null!=a&&!1!==a){if(t){var r=t.replace(e,"");s+="-".concat(r)}return"col"!==e||""!==a&&!0!==a?(s+="-".concat(a),s.toLowerCase()):s.toLowerCase()}}var h=new Map;t["a"]=n["a"].extend({name:"v-col",functional:!0,props:Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({cols:{type:[Boolean,String,Number],default:!1}},c),{},{offset:{type:[String,Number],default:null}},d),{},{order:{type:[String,Number],default:null}},u),{},{alignSelf:{type:String,default:null,validator:function(e){return["auto","start","end","center","baseline","stretch"].includes(e)}},tag:{type:String,default:"div"}}),render:function(e,t){var a=t.props,r=t.data,n=t.children,o=(t.parent,"");for(var l in a)o+=String(a[l]);var c=h.get(o);return c||function(){var e,t;for(t in c=[],f)f[t].forEach((function(e){var s=a[e],r=v(t,e,s);r&&c.push(r)}));var r=c.some((function(e){return e.startsWith("col-")}));c.push((e={col:!r||!a.cols},Object(s["a"])(e,"col-".concat(a.cols),a.cols),Object(s["a"])(e,"offset-".concat(a.offset),a.offset),Object(s["a"])(e,"order-".concat(a.order),a.order),Object(s["a"])(e,"align-self-".concat(a.alignSelf),a.alignSelf),e)),h.set(o,c)}(),e(a.tag,Object(i["a"])(r,{class:c}),n)}})},"96c7":function(e,t,a){},db6c:function(e,t,a){"use strict";a("96c7")},f26b:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-container"},[a("v-row",{staticClass:"mb-5 px-3 align-center"},[a("p",{staticClass:"text-h6 font-weight-bold my-0 mr-5"},[e._v("人員管理")]),a("v-spacer"),a("v-btn",{attrs:{c:"",color:"primary",disabled:e.CheckValid()},on:{click:e.AddNewUser}},[a("v-icon",{staticClass:"mr-1"},[e._v("mdi-account-plus")]),e._v(" 新增人員 ")],1)],1),a("v-card",[a("v-progress-linear",{attrs:{active:e.loading,indeterminate:e.loading,absolute:"",top:"",color:"primary"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.tableHeaders,items:e.users,"items-per-page":10},scopedSlots:e._u([{key:"item.Status",fn:function(t){var s=t.item;return[a("v-chip",{attrs:{small:"",color:e.getStatusColor(s.Status),dark:"",label:""}},[e._v(" "+e._s(s.Status)+" ")])]}},{key:"item.Identity",fn:function(t){var s=t.item;return[a("v-chip",{attrs:{small:"",color:e.getIdentityColor(s.Identity),dark:"",outlined:e.checkIdentityOutlined(s.Identity)}},[e._v(" "+e._s(e.getIdentityText(s.Identity))+" ")])]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("div",[a("v-btn",{staticClass:"mr-2",attrs:{color:"primary",small:""},on:{click:function(t){return e.EditUser(s)}}},[e._v(" 編輯 ")]),a("v-btn",{staticClass:"mr-2",attrs:{small:"",disabled:e.CheckValid()},on:{click:function(t){return e.EditIdentity(s)}}},[e._v(" 權限 ")])],1)]}}])})],1),a("AddNewUserDialog",{attrs:{showAddNewUserDialog:e.showAddNewUserDialog},on:{"update:showAddNewUserDialog":function(t){e.showAddNewUserDialog=t},"update:show-add-new-user-dialog":function(t){e.showAddNewUserDialog=t},reload:function(t){return e.reload(t)},AddNewUserSuccess:function(t){return e.AddNewUserSuccess(t)}}}),a("EditUserDialog",{attrs:{showEditUserDialog:e.showEditUserDialog,SelectedItem:e.SelectedItem},on:{"update:showEditUserDialog":function(t){e.showEditUserDialog=t},"update:show-edit-user-dialog":function(t){e.showEditUserDialog=t},reload:function(t){return e.reload(t)}}}),a("IdentityDialog",{attrs:{showIdentityDialog:e.showIdentityDialog,SelectedItem:e.SelectedItem},on:{"update:showIdentityDialog":function(t){e.showIdentityDialog=t},"update:show-identity-dialog":function(t){e.showIdentityDialog=t},reload:function(t){return e.reload(t)}}}),a("NewUserInfoDialog",{attrs:{showNewUserInfo:e.showNewUserInfo,newUserInfo:e.newUserInfo},on:{"update:showNewUserInfo":function(t){e.showNewUserInfo=t},"update:show-new-user-info":function(t){e.showNewUserInfo=t}}})],1)},r=[],n=(a("d81d"),a("f817")),i=(a("af16"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"",width:"380px"},model:{value:e.openDialog,callback:function(t){e.openDialog=t},expression:"openDialog"}},[e.openDialog?a("v-card",{staticClass:"pa-2"},[a("v-progress-linear",{attrs:{active:e.loading,indeterminate:e.loading,absolute:"",top:"",color:"primary"}}),a("v-card-title",[e._v("新增人員")]),a("v-card-text",{staticClass:"mt-5"},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",{staticClass:"align-start"},[a("v-col",{attrs:{cols:"3"}},[a("p",{staticClass:"font-weight-bold my-0"},[e._v("名稱")])]),a("v-col",{attrs:{cols:"9"}},[a("v-text-field",{attrs:{placeholder:"請輸入名稱",outlined:"",dense:"",rules:[e.rules.required]},model:{value:e.newUser.Name,callback:function(t){e.$set(e.newUser,"Name",t)},expression:"newUser.Name"}})],1)],1),a("v-row",{staticClass:"align-start"},[a("v-col",{attrs:{cols:"3"}},[a("p",{staticClass:"font-weight-bold my-0"},[e._v("ID")])]),a("v-col",{attrs:{cols:"9"}},[a("v-text-field",{attrs:{placeholder:"請輸入ID",outlined:"",dense:"",rules:[e.rules.required]},model:{value:e.newUser.Id,callback:function(t){e.$set(e.newUser,"Id",t)},expression:"newUser.Id"}})],1)],1)],1),a("v-row",{staticClass:"mt-5 align-start"},[a("v-col",{attrs:{cols:"3"}},[a("p",{staticClass:"font-weight-bold my-0"},[e._v("權限")])]),a("v-col",{attrs:{cols:"9"}},[a("v-radio-group",{staticClass:"mt-0",model:{value:e.newUser.Identity,callback:function(t){e.$set(e.newUser,"Identity",t)},expression:"newUser.Identity"}},e._l(e.IdentityList,(function(e,t){return a("v-radio",{key:t,attrs:{label:""+e.label,value:e.value}})})),1)],1)],1),a("v-row",{staticClass:"justify-center"},[e.error?a("p",{staticClass:"red--text"},[e._v(e._s(e.errorMessage))]):e._e()])],1),a("v-divider",{staticClass:"my-2"}),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.cancelNewUser()}}},[e._v(" 取消 ")]),a("v-btn",{attrs:{color:"primary",disabled:!e.valid},on:{click:function(t){return e.saveNewUser()}}},[e._v(" 儲存 ")])],1)],1):e._e()],1)}),o=[],l={name:"AddNewUserDialog",components:{},data:function(){return{loading:!1,valid:!1,error:!1,errorMessage:null,newUser:{Name:"",Id:"",Identity:null},IdentityList:[{label:"開發人員",value:"Developer"},{label:"安裝人員",value:"Installer"},{label:"管理人員",value:"Manager"},{label:"操作人員",value:"Operator"}],rules:{required:function(e){return!!e||"Required."}}}},props:{showAddNewUserDialog:Boolean},computed:{openDialog:{get:function(){return this.showAddNewUserDialog},set:function(e){e||(this.newUser={Name:"",Id:"",Identity:null}),this.$emit("update:showAddNewUserDialog",e)}}},mounted:function(){},methods:{cancelNewUser:function(){this.error=!1,this.errorMessage=null,this.newUser={Name:"",Id:"",Identity:null},this.openDialog=!1,this.loading=!1},saveNewUser:function(){var e=this;this.loading=!0;var t=this.$refs.form.validate();if(t){var a=this.newUser,s=this.$store.getters.GetUserInfo.Passcode;this.$api.Users.AddUser(s,a).then((function(t){e.error=!1,e.errorMessage=null,e.$emit("reload"),e.$emit("AddNewUserSuccess",t.data),e.openDialog=!1,e.loading=!1})).catch((function(t){e.error=!0,e.errorMessage=t}))}}}},c=l,d=a("2877"),u=a("6544"),f=a.n(u),v=a("8336"),h=a("b0af"),p=a("99d9"),g=a("62ad"),m=a("169a"),w=a("ce7e"),I=a("4bd4"),D=a("8e36"),b=a("67b6"),y=a("43a6"),U=a("0fd9"),C=a("2fa4"),_=a("8654"),S=Object(d["a"])(c,i,o,!1,null,null,null),V=S.exports;f()(S,{VBtn:v["a"],VCard:h["a"],VCardActions:p["a"],VCardText:p["c"],VCardTitle:p["d"],VCol:g["a"],VDialog:m["a"],VDivider:w["a"],VForm:I["a"],VProgressLinear:D["a"],VRadio:b["a"],VRadioGroup:y["a"],VRow:U["a"],VSpacer:C["a"],VTextField:_["a"]});var N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{persistent:"",width:e.$vuetify.breakpoint.mdAndUp?"35%":"90%"},model:{value:e.openDialog,callback:function(t){e.openDialog=t},expression:"openDialog"}},[e.SelectedItem?a("v-card",{staticClass:"pa-2"},[a("v-progress-linear",{attrs:{active:e.loading,indeterminate:e.loading,absolute:"",top:"",color:"primary"}}),a("v-card-title",[e.userNameEditing?a("v-text-field",{attrs:{placeholder:"請輸入使用者名稱",dense:"","hide-details":""},model:{value:e.newData.Name,callback:function(t){e.$set(e.newData,"Name",t)},expression:"newData.Name"}}):a("span",[e._v(e._s(e.rawData.Name))]),!e.userNameEditing&&e.CheckEditValid()?a("v-btn",{attrs:{icon:""},on:{click:function(t){e.userNameEditing=!0}}},[a("v-icon",[e._v("mdi-pencil")])],1):e._e(),e.userNameEditing&&e.CheckEditValid()?a("div",[a("v-btn",{attrs:{icon:""},on:{click:e.cancelEditName}},[e._v(" 取消 ")]),a("v-btn",{attrs:{icon:""},on:{click:e.comfirmEditName}},[a("v-icon",[e._v("mdi-content-save")])],1)],1):e._e(),a("v-spacer"),e.SelectedItem?a("v-chip",{attrs:{color:e.getStatusColor(e.SelectedItem.Status),dark:"",label:""}},[e._v(" "+e._s(e.SelectedItem.Status)+" ")]):e._e()],1),a("v-card-text",[a("v-row",{staticClass:"mx-0 mb-5"},[a("p",{staticClass:"font-weight-bold my-0"},[e._v("ID: "+e._s(e.SelectedItem.Id))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.CheckEditValid(),expression:"CheckEditValid()"}]},[a("p",{staticClass:"font-weight-bold py-0 mt-5"},[e._v("密碼管理")]),a("v-text-field",{staticClass:"my-2",attrs:{placeholder:"請輸入舊密碼",outlined:"",dense:"","hide-details":""},model:{value:e.newData.oldPassword,callback:function(t){e.$set(e.newData,"oldPassword",t)},expression:"newData.oldPassword"}}),a("v-text-field",{attrs:{placeholder:"請輸入新密碼",outlined:"",dense:"","hide-details":""},model:{value:e.newData.password,callback:function(t){e.$set(e.newData,"password",t)},expression:"newData.password"}})],1),a("div",[e.CheckEditValid()?e._e():a("v-btn",{staticClass:"my-3",attrs:{depressed:"",outlined:""},on:{click:function(t){return e.resetPassword()}}},[e._v(" 重置密碼 ")]),e.resetPasswordDone?a("p",[e._v("新密碼："+e._s(e.newPassword))]):e._e()],1),a("v-row",{staticClass:"my-0 justify-center"},[e.error?a("p",{staticClass:"red--text"},[e._v(e._s(e.errorMessage))]):e._e()])],1),a("v-divider",{staticClass:"my-2"}),a("v-card-actions",[e.CheckEditValid()?e._e():a("v-btn",{attrs:{icon:""},on:{click:e.deleteUser}},[a("v-icon",{attrs:{color:"#FF3B3B"}},[e._v("mdi-delete")])],1),a("v-spacer"),e.CheckEditValid()?a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.cancelEditUser()}}},[e._v(" 取消 ")]):e._e(),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.saveEditUser()}}},[e._v(" "+e._s(e.CheckEditValid()?"儲存":"完成")+" ")])],1)],1):e._e()],1),a("DeleteDialog",{attrs:{showDeleteDialog:e.showDeleteDialog,SelectedItem:e.SelectedItem},on:{"update:showDeleteDialog":function(t){e.showDeleteDialog=t},"update:show-delete-dialog":function(t){e.showDeleteDialog=t},deleteDone:e.deleteDone}})],1)},k=[],E=a("5530"),x=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"",width:"380px"},model:{value:e.openDialog,callback:function(t){e.openDialog=t},expression:"openDialog"}},[e.SelectedItem?a("v-card",{staticClass:"pa-2"},[a("v-progress-linear",{attrs:{active:e.loading,indeterminate:e.loading,absolute:"",top:"",color:"primary"}}),a("v-card-title",[e._v("提醒")]),a("v-card-text",[e._v(" 確定要刪除 "),a("span",[e._v(e._s(e.$t("UserInfo."+e.SelectedItem.Identity)))]),e._v("   "),a("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.SelectedItem.Name))]),e._v("? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"#383838"},on:{click:e.cancelDelete}},[e._v(" 取消 ")]),a("v-btn",{attrs:{color:"#FF3B3B",dark:""},on:{click:e.deleteConfirm}},[e._v(" 刪除 ")])],1)],1):e._e()],1)}),O=[],$={name:"DeleteDialog",components:{},data:function(){return{loading:!1}},props:{showDeleteDialog:Boolean,SelectedItem:Object},computed:{openDialog:{get:function(){return this.showDeleteDialog},set:function(e){this.$emit("update:showDeleteDialog",e)}}},mounted:function(){},methods:{cancelDelete:function(){this.openDialog=!1},deleteConfirm:function(){var e=this;this.loading=!0,this.loading=!1;var t=this.SelectedItem.Id,a=this.$store.getters.GetUserInfo.Passcode;this.$api.Users.DeleteUser(a,t).then((function(){e.openDialog=!1,e.loading=!1,e.$emit("deleteDone")}))},getStatusColor:function(e){switch(e){case"登入":return"#0BC669";case"離線":return"#939393"}}}},B=$,j=Object(d["a"])(B,x,O,!1,null,null,null),A=j.exports;f()(j,{VBtn:v["a"],VCard:h["a"],VCardActions:p["a"],VCardText:p["c"],VCardTitle:p["d"],VDialog:m["a"],VProgressLinear:D["a"],VSpacer:C["a"]});var P={name:"EditUserDialog",components:{DeleteDialog:A},data:function(){return{rawData:null,newData:{id:"",name:"",identity:"",oldPassword:"",password:"",lastOnlineTime:""},resetPasswordDone:!1,newPassword:null,loading:!1,userNameEditing:!1,error:!1,errorMessage:null,showDeleteDialog:!1}},props:{showEditUserDialog:Boolean,SelectedItem:Object},watch:{SelectedItem:function(e){this.rawData=JSON.parse(JSON.stringify(e)),this.newData=JSON.parse(JSON.stringify(this.rawData))},userNameEditing:function(e){e&&(this.newData=JSON.parse(JSON.stringify(this.rawData)))}},computed:{openDialog:{get:function(){return this.showEditUserDialog},set:function(e){this.resetPasswordDone=!1,this.$emit("update:showEditUserDialog",e)}}},mounted:function(){},methods:{resetPassword:function(){var e=this;this.loading=!0;var t=this.$store.getters.GetUserInfo.Passcode,a=this.SelectedItem.Id;this.$api.Users.ResetPassword(t,a).then((function(t){e.loading=!1,console.log("res : ",t),e.resetPasswordDone=!0,e.newPassword=t.data.Password}))},deleteDone:function(){this.openDialog=!1,this.$emit("reload",this.SelectedItem)},deleteUser:function(){this.showDeleteDialog=!0},comfirmEditName:function(){this.rawData.Name=this.newData.Name,this.userNameEditing=!1},cancelEditName:function(){this.newData.name=this.rawData.Name,this.userNameEditing=!1},cancelEditUser:function(){this.error=!1,this.errorMessage=null,this.openDialog=!1},saveEditUser:function(){var e=this;if(this.CheckEditValid()){this.loading=!0;var t=Object(E["a"])({},this.newData);console.log(t),t.password||delete t.password,delete t.Status;var a=this.$store.getters.GetUserInfo.Passcode,s=this.$store.getters.GetUserInfo.Id===this.SelectedItem.Id;s&&this.$api.Users.UpdateInfo(a,t).then((function(t){console.log(t),e.loading=!1,e.$emit("reload",t.data),e.error=!1,e.errorMessage=null,e.openDialog=!1})).catch((function(t){e.error=!0,e.errorMessage=t}))}else this.openDialog=!1},CheckEditValid:function(){var e=this.$store.getters.GetUserInfo;return!e||e.Id===this.SelectedItem.Id},getStatusColor:function(e){switch(e){case"登入":return"#0BC669";case"離線":return"#939393"}}}},T=P,M=a("cc20"),G=a("132d"),L=Object(d["a"])(T,N,k,!1,null,null,null),J=L.exports;f()(L,{VBtn:v["a"],VCard:h["a"],VCardActions:p["a"],VCardText:p["c"],VCardTitle:p["d"],VChip:M["a"],VDialog:m["a"],VDivider:w["a"],VIcon:G["a"],VProgressLinear:D["a"],VRow:U["a"],VSpacer:C["a"],VTextField:_["a"]});var R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"",width:e.$vuetify.breakpoint.mdAndUp?"40%":"90%"},model:{value:e.openDialog,callback:function(t){e.openDialog=t},expression:"openDialog"}},[e.SelectedItem?a("v-card",{staticClass:"pa-2"},[a("v-card-title",[a("span",[e._v(e._s(e.SelectedItem.Name))]),a("v-spacer"),e.SelectedItem?a("v-chip",{attrs:{color:e.getStatusColor(e.SelectedItem.Status),dark:"",label:""}},[e._v(" "+e._s(e.SelectedItem.Status)+" ")]):e._e()],1),a("v-card-text",[a("v-row",{staticClass:"mx-0 mb-5"},[a("p",{staticClass:"font-weight-bold my-0"},[e._v("ID: "+e._s(e.SelectedItem.Id))])]),a("div",[a("p",{staticClass:"font-weight-bold py-0 mt-5"},[e._v("權限")]),a("v-radio-group",{model:{value:e.SelectedItem.Identity,callback:function(t){e.$set(e.SelectedItem,"Identity",t)},expression:"SelectedItem.Identity"}},e._l(e.IdentityList,(function(e,t){return a("v-radio",{key:t,attrs:{label:""+e.label,value:e.value}})})),1)],1),a("div")],1),a("v-divider",{staticClass:"my-2"}),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.cancelIdentityEdit}},[e._v(" 取消 ")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.saveIdentityEdit()}}},[e._v(" 儲存 ")])],1)],1):e._e()],1)},F=[],q={name:"EditUserDialog",components:{},data:function(){return{IdentityList:[{label:"開發人員",value:"Developer"},{label:"安裝人員",value:"Installer"},{label:"管理人員",value:"Manager"},{label:"操作人員",value:"Operator"}]}},props:{showIdentityDialog:Boolean,SelectedItem:Object},computed:{openDialog:{get:function(){return this.showIdentityDialog},set:function(e){this.$emit("update:showIdentityDialog",e)}}},mounted:function(){},methods:{cancelIdentityEdit:function(){this.openDialog=!1},saveIdentityEdit:function(){var e=this,t=this.$store.getters.GetUserInfo.Passcode,a={Id:this.SelectedItem.Id,Identity:this.SelectedItem.Identity};this.$api.Users.EditUser(t,a).then((function(t){console.log("res : ",t),e.openDialog=!1}))},getStatusColor:function(e){switch(e){case"登入":return"#0BC669";case"離線":return"#939393"}}}},z=q,H=Object(d["a"])(z,R,F,!1,null,null,null),W=H.exports;f()(H,{VBtn:v["a"],VCard:h["a"],VCardActions:p["a"],VCardText:p["c"],VCardTitle:p["d"],VChip:M["a"],VDialog:m["a"],VDivider:w["a"],VRadio:b["a"],VRadioGroup:y["a"],VRow:U["a"],VSpacer:C["a"]});var K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"",width:"380px"},model:{value:e.openDialog,callback:function(t){e.openDialog=t},expression:"openDialog"}},[e.openDialog?a("v-card",{staticClass:"pa-2"},[a("v-card-title",[a("v-icon",{staticClass:"mr-3",attrs:{color:"success"}},[e._v("mdi-check-circle")]),e._v("新增人員成功")],1),a("v-card-text",{staticClass:"mt-5"},[a("v-row",{staticClass:"align-start"},[a("v-col",{attrs:{cols:"3"}},[a("p",{staticClass:"font-weight-bold my-0"},[e._v("ID")])]),a("v-col",{attrs:{cols:"9"}},[a("p",{staticClass:"my-0"},[e._v(e._s(e.newUserInfo.Id))])])],1),a("v-row",{staticClass:"align-start"},[a("v-col",{attrs:{cols:"3"}},[a("p",{staticClass:"font-weight-bold my-0"},[e._v("名稱")])]),a("v-col",{attrs:{cols:"9"}},[a("p",{staticClass:"my-0"},[e._v(e._s(e.newUserInfo.Name))])])],1),a("v-row",{staticClass:"align-start"},[a("v-col",{attrs:{cols:"3"}},[a("p",{staticClass:"font-weight-bold my-0"},[e._v("權限")])]),a("v-col",{attrs:{cols:"9"}},[a("p",{staticClass:"my-0"},[e._v(e._s(e.$t("UserInfo."+e.newUserInfo.Identity)))])])],1),a("v-row",{staticClass:"align-start"},[a("v-col",{attrs:{cols:"3"}},[a("p",{staticClass:"font-weight-bold my-0"},[e._v("密碼")])]),a("v-col",{attrs:{cols:"9"}},[a("p",{staticClass:"font-weight-bold my-0"},[e._v(e._s(e.newUserInfo.Password))])])],1)],1),a("v-divider",{staticClass:"my-2"}),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.openDialog=!1}}},[e._v(" 完成 ")])],1)],1):e._e()],1)},Q=[],X={name:"NewUserInfo",components:{},data:function(){return{}},props:{showNewUserInfo:Boolean,newUserInfo:Object},computed:{openDialog:{get:function(){return this.showNewUserInfo},set:function(e){e||(this.newUser={Name:"",Id:"",Identity:null}),this.$emit("update:showNewUserInfo",e)}}},mounted:function(){},methods:{}},Y=X,Z=Object(d["a"])(Y,K,Q,!1,null,null,null),ee=Z.exports;f()(Z,{VBtn:v["a"],VCard:h["a"],VCardActions:p["a"],VCardText:p["c"],VCardTitle:p["d"],VCol:g["a"],VDialog:m["a"],VDivider:w["a"],VIcon:G["a"],VRow:U["a"],VSpacer:C["a"]});var te={name:"UserManagement",components:{AddNewUserDialog:V,EditUserDialog:J,IdentityDialog:W,NewUserInfoDialog:ee},data:function(){return{tableHeaders:[{text:"狀態",align:"start",sortable:!1,value:"Status"},{text:"Id",align:"start",sortable:!0,value:"Id"},{text:"名稱",align:"start",sortable:!0,value:"Name"},{text:"權限",align:"start",sortable:!0,value:"Identity"},{text:"",align:"start",sortable:!1,value:"actions"}],loading:!1,user:null,users:[],newUserInfo:null,SelectedItem:null,showAddNewUserDialog:!1,showEditUserDialog:!1,showIdentityDialog:!1,showNewUserInfo:!1,getUsersInterval:null}},computed:{},watch:{},mounted:function(){var e=this;this.user=JSON.parse(localStorage.getItem("UserInfo")),this.loading=!0,this.getUsers(),this.getUsersInterval=setInterval((function(){e.getUsers()}),5e3)},beforeDestroy:function(){clearInterval(this.getUsersInterval)},methods:{AddNewUserSuccess:function(e){this.showNewUserInfo=!0,this.newUserInfo=e},reload:function(e){if(this.getUsers(),e){var t=JSON.parse(localStorage.getItem("UserInfo"));t.Id===e.Id&&alert("請重新登入")}},getUsers:function(){var e=this,t=JSON.parse(localStorage.getItem("UserInfo")).Passcode;this.$api.Users.GetUsers(t).then((function(t){var a=t.data.map((function(t){return{Id:t.Id,Name:t.Name,Identity:t.Identity,LastOnlineTime:t.LastOnlineTime,Status:e.checkStatus(t.LastOnlineTime)}}));e.users=a,e.loading=!1})).catch((function(t){e.Initial(t)}))},AddNewUser:function(){this.showAddNewUserDialog=!0},EditUser:function(e){this.SelectedItem=e,this.showEditUserDialog=!0},EditIdentity:function(e){this.SelectedItem=e,this.showIdentityDialog=!0},CheckEditValid:function(){var e=this.$store.getters.GetUserInfo;return!e||e.Id===this.SelectedItem.Id},CheckEditIdentityValid:function(e){var t=this.$store.getters.GetUserInfo;if(!t)return!0;var a=this.CheckIdentity(t),s=this.CheckIdentity(e);return!(a>s)},CheckValid:function(){var e=this.$store.getters.GetUserInfo;if(!e)return!0;switch(e.Identity){case"Manager":case"Developer":case"Installer":return!1;default:return!0}},checkStatus:function(e){var t=Object(n["a"])().diff(Object(n["a"])(e))/1e3;return t<300?"登入":"離線"},getStatusColor:function(e){switch(e){case"登入":return"#0BC669";case"離線":return"#939393"}},getIdentityColor:function(e){switch(e){case"Developer":return"primary";case"Installer":return"primary";case"Manager":return"primary";case"Operator":return"primary";default:return"#383838"}},getIdentityText:function(e){switch(e){case"Developer":return"開發人員";case"Installer":return"安裝人員";case"Manager":return"管理人員";case"Operator":return"操作人員";default:return"無登入人員"}},CheckIdentity:function(e){switch(e){case"Developer":return 0;case"Installer":return 1;case"Manager":return 2;case"Operator":return 3;default:return-1}},checkIdentityOutlined:function(e){switch(e){case"Developer":return!1;default:return!0}}}},ae=te,se=(a("db6c"),a("8fea")),re=Object(d["a"])(ae,s,r,!1,null,"2b1f0138",null);t["default"]=re.exports;f()(re,{VBtn:v["a"],VCard:h["a"],VChip:M["a"],VDataTable:se["a"],VIcon:G["a"],VProgressLinear:D["a"],VRow:U["a"],VSpacer:C["a"]})}}]);
//# sourceMappingURL=chunk-5a87e90c.7559a0d6.js.map